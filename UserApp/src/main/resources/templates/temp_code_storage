<home.html>
- ìœ ì¹˜ì› ë¦¬ìŠ¤íŠ¸
<!--       <div class="kinderResult" th:each="kinder : ${kinderInfo}"> &lt;!&ndash;ì „ì²´/ì•¼ê°„/ì£¼ë§ ì„ íƒì‹œ ê°ê°ì— ë§ëŠ” ìœ ì¹˜ì› ë‚˜ì˜¤ê²Œ ìˆ˜ì •í•´ì•¼í•¨&ndash;&gt;-->
<!--          <input type="checkbox" name="kinder" value="1"> &lt;!&ndash;checkBox valueë„ ê°’ ë°”ê¾¸ê¸° ìˆ˜ì •í•´ì•¼í•¨&ndash;&gt;-->
<!--          <div class="kinderInfo-wrap">-->
<!--            <div class="img-wrap">-->
<!--              <img src="/img/allKinderType.png" alt="">-->
<!--            </div>-->
<!--            <div class="kinderInfo">-->
<!--              <div class="infoUpper">-->
<!--                <p class="kinderTitle">[[${kinder.kinderName}]]</p>-->
<!--              </div>-->
<!--              <div class="infoUnder">-->
<!--                <p class="kinderLoc">[[${kinder.kinderAddress}]]</p>-->
<!--                <p class="kinderCall">[[${kinder.kinderPhone}]]</p>-->
<!--              </div>-->
<!--            </div>-->
<!--          </div>-->
<!--        </div>-->


<li th:if="true"><a href="#" class="prev-page">&lsaquo;</a></li>
            <li><a href="#" class="select">1</a></li>
            <li><a href="#">2</a></li>
            <li><a href="#">3</a></li>
            <li><a href="#">4</a></li>
            <li><a href="#">5</a></li>
            <li th:if="true"><a href="#" class="next-page">&rsaquo;</a></li>


<home.js>

// function loadKinderListByType(kinderType) {
    //     $(".label-wrap").removeClass('select');
    //     $(`input[name=kinderType][value=${kinderType}]`).prop('checked', true).closest("label").addClass('select');
    //
    //     // ì›í•˜ëŠ” ê¸°ëŠ¥ ì‹¤í–‰
    //     if (kinderType === 'A') {
    //         fetch('/kinder/find?page='+page+'&size='+size, {
    //             method: 'get'
    //             // headers: {
    //             //     'Content-Type': 'application/json'
    //             // },
    //             // body: JSON.stringify({
    //             //     'page':page,
    //             //     'size':size
    //             // })  // JSON í˜•ì‹ìœ¼ë¡œ ë°ì´í„° ë³´ë‚´ê¸°
    //         })
    //             .then(response => response.json())  // ì‘ë‹µì„ JSONìœ¼ë¡œ ì²˜ë¦¬
    //             .then(data => {
    //                 createKinder(data);
    //                 console.log('Success:', data);  // ì„œë²„ë¡œë¶€í„° ë°›ì€ ì‘ë‹µ ì¶œë ¥
    //             })
    //             .catch((error) => {
    //                 console.error("ìœ ì¹˜ì›ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ê³¼ì •ì—ì„œ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
    //             });
    //     } else if (kinderType === 'N') {
    //         fetch('/kinder/find?night=Y&page='+page+'&size='+size, {
    //             method: 'get'
    //         })
    //             .then(response => response.json())  // ì‘ë‹µì„ JSONìœ¼ë¡œ ì²˜ë¦¬
    //             .then(data => {
    //                 createKinder(data);
    //                 console.log('Success:', data);  // ì„œë²„ë¡œë¶€í„° ë°›ì€ ì‘ë‹µ ì¶œë ¥
    //             })
    //             .catch((error) => {
    //                 console.error("ìœ ì¹˜ì›ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ê³¼ì •ì—ì„œ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
    //             });
    //     } else if (kinderType === 'W') {
    //         fetch('/kinder/find?week=Y&page='+page+'&size='+size, {
    //             method: 'get'
    //             // headers: {
    //             //     'Content-Type': 'application/json'
    //             // },
    //             // body: JSON.stringify({
    //             //     'night':kinderType,
    //             //     'page':page,
    //             //     'size':size
    //             // })  // JSON í˜•ì‹ìœ¼ë¡œ ë°ì´í„° ë³´ë‚´ê¸°
    //         })
    //             .then(response => response.json())  // ì‘ë‹µì„ JSONìœ¼ë¡œ ì²˜ë¦¬
    //             .then(data => {
    //                 createKinder(data);
    //                 console.log('Success:', data);  // ì„œë²„ë¡œë¶€í„° ë°›ì€ ì‘ë‹µ ì¶œë ¥
    //             })
    //             .catch((error) => {
    //                 console.error("ìœ ì¹˜ì›ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ê³¼ì •ì—ì„œ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
    //             });
    //     }
    // }



    kakao.maps.load(function () {
            //ë§ˆì»¤ ì¢Œí‘œë“¤
            // var locations = [
            //     {lat: 37.5665, lng: 126.9780}
            //     ,{ lat: 37.5651, lng: 126.9895 }
            //     ,{ lat: 37.5700, lng: 126.9820 }
            // ];
            alert(locations.toString());
            // ì´ ì½”ë“œëŠ” script íƒœê·¸ ë°‘ì— ë°”ë¡œ ë‘ì„¸ìš”!
            var container = document.getElementById('map'); //ì§€ë„ë¥¼ ë‹´ì„ ì˜ì—­ì˜ DOM ë ˆí¼ëŸ°ìŠ¤
            var options = { //ì§€ë„ë¥¼ ìƒì„±í•  ë•Œ í•„ìš”í•œ ê¸°ë³¸ ì˜µì…˜
                center: new kakao.maps.LatLng(37.5665, 126.9780), //ì§€ë„ì˜ ì¤‘ì‹¬ì¢Œí‘œ.
                // center: new kakao.maps.LatLng(locations[0].lat, locations[0].lng),
                level: 9 //ì§€ë„ì˜ ë ˆë²¨(í™•ëŒ€, ì¶•ì†Œ ì •ë„)
            };

            var map = new kakao.maps.Map(container, options); //ì§€ë„ ìƒì„± ë° ê°ì²´ ë¦¬í„´

            // --------------ì§€ë„ í™•ëŒ€ ì¶•ì†Œ ê¸°ëŠ¥-------------
            // ì§€ë„ í™•ëŒ€ ì¶•ì†Œë¥¼ ì œì–´í•  ìˆ˜ ìˆëŠ”  ì¤Œ ì»¨íŠ¸ë¡¤ì„ ìƒì„±í•©ë‹ˆë‹¤
            var zoomControl = new kakao.maps.ZoomControl();
            map.addControl(zoomControl, kakao.maps.ControlPosition.RIGHT);

            // // ì§€ë„ê°€ í™•ëŒ€ ë˜ëŠ” ì¶•ì†Œë˜ë©´ ë§ˆì§€ë§‰ íŒŒë¼ë¯¸í„°ë¡œ ë„˜ì–´ì˜¨ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë„ë¡ ì´ë²¤íŠ¸ë¥¼ ë“±ë¡í•©ë‹ˆë‹¤
            // kakao.maps.event.addListener(map, 'zoom_changed', function() {
            //
            //     // ì§€ë„ì˜ í˜„ì¬ ë ˆë²¨ì„ ì–»ì–´ì˜µë‹ˆë‹¤
            //     var level = map.getLevel();
            //
            //     var message = 'í˜„ì¬ ì§€ë„ ë ˆë²¨ì€ ' + level + ' ì…ë‹ˆë‹¤';
            //     var resultDiv = document.getElementById('result');
            //     resultDiv.innerHTML = message;
            //
            // });

            // ë§ˆì»¤ ì°ê³  í•´ë‹¹ ë§ˆì»¤ í´ë¦­ì‹œ í•´ë‹¹ ì •ë³´ ëœ¨ëŠ” ê¸°ëŠ¥
            const places = new kakao.maps.services.Places();

            // ì—´ë¦° ì •ë³´ì°½ì„ ì¶”ì í•  ë³€ìˆ˜
            let currentInfoWindow = null;

            locations.forEach(loc => {
                const markerPosition = new kakao.maps.LatLng(loc.lat, loc.lng);

                const marker = new kakao.maps.Marker({
                    map: map,
                    position: markerPosition
                });

                // í•´ë‹¹ ì¢Œí‘œ ê·¼ì²˜ì—ì„œ ê°€ì¥ ê°€ê¹Œìš´ ì¥ì†Œë¥¼ ê²€ìƒ‰
                places.keywordSearch('ì‹ë‹¹', function (result, status) {
                    if (status === kakao.maps.services.Status.OK && result.length > 0) {
                        var place = result[0]; // ê°€ì¥ ê°€ê¹Œìš´ ì¥ì†Œ

                        const content = `
                                <div class="info-window">
                                    <strong>${place.place_name}</strong><br>
                                    <div class="address">ğŸ“ ${place.road_address_name || place.address_name}</div>
                                    <div class="phone">â˜ ${place.phone}</div>
                                    <a href="${place.place_url}" target="_blank">ì¹´ì¹´ì˜¤ë§µì—ì„œ ë³´ê¸°</a>
                                </div>
                                `;

                        const infowindow = new kakao.maps.InfoWindow({
                            content: content,
                            removable: true
                        });


                        // ë§ˆì»¤ í´ë¦­ ì‹œ, ì´ì „ì— ì—´ë¦° ì •ë³´ì°½ì„ ë‹«ê³  ìƒˆë¡œìš´ ì •ë³´ì°½ì„ ì—½ë‹ˆë‹¤
                        kakao.maps.event.addListener(marker, 'click', function () {
                            // ì´ì „ ì •ë³´ì°½ì´ ì—´ë ¤ ìˆë‹¤ë©´ ë‹«ê¸°
                            if (currentInfoWindow) {
                                currentInfoWindow.close();
                            }
                            // ìƒˆë¡œìš´ ì •ë³´ì°½ ì—´ê¸°
                            infowindow.open(map, marker);
                            // ì—´ë¦° ì •ë³´ì°½ ì¶”ì 
                            currentInfoWindow = infowindow;
                        });
                    }
                }, {
                    location: markerPosition,
                    radius: 100,      // ë°˜ê²½ 100m ë‚´ ê²€ìƒ‰
                    sort: 'distance'  // ê±°ë¦¬ìˆœ
                });
            });
        });


        // ì¹´ì¹´ì˜¤ë§µ ë¡œë“œí›„ ì‹¤í–‰
            function renderMap(locations) {

                // ì´ ì½”ë“œëŠ” script íƒœê·¸ ë°‘ì— ë°”ë¡œ ë‘ì„¸ìš”!
                var container = document.getElementById('map'); //ì§€ë„ë¥¼ ë‹´ì„ ì˜ì—­ì˜ DOM ë ˆí¼ëŸ°ìŠ¤
                if (locations.length === 0) return;

                var options = {
                    center: new kakao.maps.LatLng(locations[0].lat, locations[0].lng),
                    level: 10
                };

                var map = new kakao.maps.Map(container, options); //ì§€ë„ ìƒì„± ë° ê°ì²´ ë¦¬í„´

                // --------------ì§€ë„ í™•ëŒ€ ì¶•ì†Œ ê¸°ëŠ¥-------------
                // ì§€ë„ í™•ëŒ€ ì¶•ì†Œë¥¼ ì œì–´í•  ìˆ˜ ìˆëŠ”  ì¤Œ ì»¨íŠ¸ë¡¤ì„ ìƒì„±í•©ë‹ˆë‹¤
                var zoomControl = new kakao.maps.ZoomControl();
                map.addControl(zoomControl, kakao.maps.ControlPosition.RIGHT);

                // // ì§€ë„ê°€ í™•ëŒ€ ë˜ëŠ” ì¶•ì†Œë˜ë©´ ë§ˆì§€ë§‰ íŒŒë¼ë¯¸í„°ë¡œ ë„˜ì–´ì˜¨ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë„ë¡ ì´ë²¤íŠ¸ë¥¼ ë“±ë¡í•©ë‹ˆë‹¤
                // kakao.maps.event.addListener(map, 'zoom_changed', function() {
                //
                //     // ì§€ë„ì˜ í˜„ì¬ ë ˆë²¨ì„ ì–»ì–´ì˜µë‹ˆë‹¤
                //     var level = map.getLevel();
                //
                //     var message = 'í˜„ì¬ ì§€ë„ ë ˆë²¨ì€ ' + level + ' ì…ë‹ˆë‹¤';
                //     var resultDiv = document.getElementById('result');
                //     resultDiv.innerHTML = message;
                //
                // });

                // ë§ˆì»¤ ì°ê³  í•´ë‹¹ ë§ˆì»¤ í´ë¦­ì‹œ í•´ë‹¹ ì •ë³´ ëœ¨ëŠ” ê¸°ëŠ¥
                const places = new kakao.maps.services.Places();

                // ì—´ë¦° ì •ë³´ì°½ì„ ì¶”ì í•  ë³€ìˆ˜
                let currentInfoWindow = null;

                locations.forEach(loc => {
                    const markerPosition = new kakao.maps.LatLng(loc.lat, loc.lng);

                    const marker = new kakao.maps.Marker({
                        map: map,
                        position: markerPosition
                    });

                    // í•´ë‹¹ ì¢Œí‘œ ê·¼ì²˜ì—ì„œ ê°€ì¥ ê°€ê¹Œìš´ ì¥ì†Œë¥¼ ê²€ìƒ‰
                    places.keywordSearch('ì–´ë¦°ì´ì§‘', function (result, status) {
                        if (status === kakao.maps.services.Status.OK && result.length > 0) {
                            var place = result[0]; // ê°€ì¥ ê°€ê¹Œìš´ ì¥ì†Œ

                            const content = `
                                    <div class="info-window">
                                        <strong>${place.place_name}</strong><br>
                                        <div class="address">ğŸ“ ${place.road_address_name || place.address_name}</div>
                                        <div class="phone">â˜ ${place.phone}</div>
                                        <a href="${place.place_url}" target="_blank">ì¹´ì¹´ì˜¤ë§µì—ì„œ ë³´ê¸°</a>
                                    </div>
                                    `;

                            const infowindow = new kakao.maps.InfoWindow({
                                content: content,
                                removable: true
                            });


                            // ë§ˆì»¤ í´ë¦­ ì‹œ, ì´ì „ì— ì—´ë¦° ì •ë³´ì°½ì„ ë‹«ê³  ìƒˆë¡œìš´ ì •ë³´ì°½ì„ ì—½ë‹ˆë‹¤
                            kakao.maps.event.addListener(marker, 'click', function () {
                                // ì´ì „ ì •ë³´ì°½ì´ ì—´ë ¤ ìˆë‹¤ë©´ ë‹«ê¸°
                                if (currentInfoWindow) {
                                    currentInfoWindow.close();
                                }
                                // ìƒˆë¡œìš´ ì •ë³´ì°½ ì—´ê¸°
                                infowindow.open(map, marker);
                                // ì—´ë¦° ì •ë³´ì°½ ì¶”ì 
                                currentInfoWindow = infowindow;
                            });
                        }
                    }, {
                        location: markerPosition,
                        radius: 100,      // ë°˜ê²½ 100m ë‚´ ê²€ìƒ‰
                        sort: 'distance'  // ê±°ë¦¬ìˆœ
                    });
                });
            };

            function updateMarkers(locations) {
                    // ê¸°ì¡´ ë§ˆì»¤ ì œê±°
                    markers.forEach(marker => {
                        marker.setMap(null);
                        if (marker.infoWindow) {
                            marker.infoWindow.close(); // ğŸ’¡ infoWindowë„ í•¨ê»˜ ì œê±°
                        }
                    });
                    markers = [];

                    var places = new kakao.maps.services.Places();


                    locations.forEach(loc => {
                        var markerPosition = new kakao.maps.LatLng(loc.lat, loc.lng);
                        var marker = new kakao.maps.Marker({
                            map: map,
                            position: markerPosition
                        });

                        markers.push(marker);

                        // ì¥ì†Œ ì •ë³´ ê°€ì ¸ì˜¤ê¸°
                        places.keywordSearch('ì–´ë¦°ì´ì§‘', function (result, status) {
                            if (status === kakao.maps.services.Status.OK && result.length > 0) {
                                var place = result[0];
                                var content = `
                                <div class="info-window">
                                    <strong>${place.place_name}</strong><br>
                                    <div class="address">ğŸ“ ${place.road_address_name || place.address_name}</div>
                                    <div class="phone">â˜ ${place.phone}</div>
                                    <a href="${place.place_url}" target="_blank">ì¹´ì¹´ì˜¤ë§µì—ì„œ ë³´ê¸°</a>
                                </div>
                            `;
                                var infowindow = new kakao.maps.InfoWindow({
                                    content: content,
                                    removable: true
                                });

                                marker.infoWindow = infowindow;
                                kakao.maps.event.addListener(marker, 'click', function () {
                                    // ì´ë¯¸ ì—´ë¦° ì°½ì„ ë‹¤ì‹œ í´ë¦­í–ˆì„ ë•Œ ë‹«ê¸°
                                    if (currentInfoWindow && currentInfoWindow === infowindow) {
                                        currentInfoWindow.close();
                                        currentInfoWindow = null;
                                        return;
                                    }

                                    if (currentInfoWindow) currentInfoWindow.close();
                                    infowindow.open(map, marker);
                                    currentInfoWindow = infowindow;
                                });
                            }
                        }, {
                            location: markerPosition,
                            radius: 100,
                            sort: 'distance'
                        });
                    });

                    // ì²« ë²ˆì§¸ ìœ„ì¹˜ë¡œ ì¤‘ì‹¬ ì´ë™
                    if (locations.length > 0) {
                        map.setCenter(new kakao.maps.LatLng(locations[0].lat, locations[0].lng));
                    }
                }